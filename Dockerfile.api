# Define build argument for the base image tag
ARG TAG=latest

# Extend from the dynamically tagged base Dockerfile
FROM syncsoftco/hubitat-lock-manager:${TAG}

# Install Tailscale during build time
RUN apt-get update && \
    apt-get install -y curl gnupg2 && \
    curl -fsSL https://tailscale.com/install.sh | sh

# Set the ENTRYPOINT to launch the Python script
ENTRYPOINT ["python", "-m", "hubitat_lock_manager.api_launcher"]
